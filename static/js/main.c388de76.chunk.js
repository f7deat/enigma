(this["webpackJsonpjubilant-enigma"]=this["webpackJsonpjubilant-enigma"]||[]).push([[0],{100:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c(1),n=c.n(a),i=c(30),r=c.n(i),l=c(11),j=c(19),o=c(13),b=c(7),d="SET_IMAGE",x="add_image",u="update_text",m="add_text";function h(){var e=Object(b.f)(),t=Object(a.useRef)(null),c=Object(a.useState)(),i=Object(l.a)(c,2),r=i[0],x=i[1],u=Object(a.useRef)(),m=Object(o.c)((function(e){return e.textReducer.listText})),h=Object(o.c)((function(e){return e.imageReducer.listImage})),f=Object(o.b)();Object(a.useEffect)((function(){r&&(u.current.nodes([t.current]),u.current.getLayer().batchDraw())}),[r]);var O=function(e){e.evt.preventDefault()},p=function(){f({type:"SET_TEXT",payload:r}),e.push("/text/edit")};var g=function(){f({type:d,payload:r}),e.push("/image/setting")};return Object(s.jsx)(j.c,{width:500,height:500,className:"bg-white border border-blue-500",onMouseDown:function(e){e.target===e.target.getStage()&&x(null)},children:Object(s.jsxs)(j.b,{children:[null===m||void 0===m?void 0:m.map((function(e,c){return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)(j.d,{id:e.id,ref:t,text:e.text,draggable:!0,onClick:function(){return x(e.id)},onContextMenu:O,onDblClick:p}),Object(s.jsx)(j.e,{ref:u,id:e.id,visible:e.id===r})]},c)})),null===h||void 0===h?void 0:h.map((function(e,c){return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)(j.a,{image:e.image,ref:t,draggable:!0,onClick:function(){return function(){x(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}(e.id)},onContextMenu:O,onDblClick:g}),Object(s.jsx)(j.e,{visible:e.id===r,ref:u})]},c)}))]})})}var f=function(e){return Object(s.jsxs)("div",{className:"".concat(e.visible?"flex justify-center items-center h-screen w-screen absolute top-0 left-0":"hidden"),children:[Object(s.jsx)("div",{className:"w-screen h-screen bg-gray-500 opacity-50 absolute z-10 top-0 left-0"}),Object(s.jsxs)("div",{className:"h-3/4 w-1/2 bg-white absolute z-20 rounded shadow-lg",children:[Object(s.jsxs)("div",{className:"flex justify-between items-center px-3 py-1 text-gray-800",children:[Object(s.jsx)("div",{className:"font-bold",children:e.title}),Object(s.jsx)("button",{className:"p-2 transition duration-300 ease-in-out transform hover:rotate-90",onClick:e.onCanel,children:Object(s.jsx)("i",{className:"fas fa-times"})})]}),Object(s.jsx)("div",{className:"h-full",style:{height:"calc(100% - 48px)"},children:e.children})]})]})},O=c(22),p=c(23),g=c(9),v={image:null,listImage:[]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(g.a)(Object(g.a)({},e),{},{image:t.payload});case x:return Object(g.a)(Object(g.a)({},e),{},{listImage:[].concat(Object(p.a)(e.listImage),[t.payload])});default:return e}},y={textId:"",nodes:{},listText:[]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_NODE":return Object(g.a)(Object(g.a)({},e),{},{nodes:t.payload});case"SET_TEXT":return Object(g.a)(Object(g.a)({},e),{},{textId:t.payload});case m:return Object(g.a)(Object(g.a)({},e),{},{listText:[].concat(Object(p.a)(e.listText),[t.payload])});case u:return e.listText.find((function(e){return e.id===t.payload.id})).text=t.payload.text,Object(g.a)(Object(g.a)({},e),{},{listText:e.listText.map((function(e){return e.id===t.payload.id?e=t.payload:e}))});default:return e}},C={node:{}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRANSFORM_NODE":return Object(g.a)(Object(g.a)({},e),{},{node:t.payload});default:return e}},k=Object(O.a)({imageReducer:N,textReducer:w,TransformReducer:S}),T=Object(O.b)(k);function I(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"border-b bg-white flex items-center",children:[Object(s.jsxs)("div",{className:"px-4 py-3 flex-grow",children:[Object(s.jsx)("button",{type:"button",className:"px-2",children:Object(s.jsx)("i",{className:"fas fa-bars"})}),Object(s.jsx)("button",{type:"button",className:"px-2 font-medium hover:text-blue-700",onClick:function(){return n(!0)},children:"New Design"})]}),Object(s.jsx)("div",{className:"px-2",children:Object(s.jsxs)("button",{className:"px-4 py-1 rounded bg-blue-500 hover:bg-blue-600 text-white font-bold",onClick:function(){console.log(T.getState())},children:[Object(s.jsx)("i",{className:"fas fa-eye mr-2"}),"Preview"]})})]}),Object(s.jsx)(f,{title:"Start new design",visible:c,onCanel:function(){return n(!1)},children:Object(s.jsxs)("div",{className:"flex h-full border-t",children:[Object(s.jsxs)("div",{className:"w-1/4 bg-gray-100 h-full",children:[Object(s.jsxs)("div",{className:"py-2 px-3 hover:bg-gray-200 font-medium cursor-pointer",children:[Object(s.jsx)("i",{className:"fas fa-award mr-2"}),"Recommendation"]}),Object(s.jsxs)("div",{className:"py-2 px-3 hover:bg-blue-200 font-medium cursor-pointer",children:[Object(s.jsx)("i",{className:"fab fa-facebook text-blue-600 mr-2"}),"Facebook"]}),Object(s.jsxs)("div",{className:"py-2 px-3 hover:bg-purple-200 font-medium cursor-pointer",children:[Object(s.jsx)("i",{className:"fab fa-instagram text-purple-600 mr-2"}),"Instagram"]}),Object(s.jsxs)("div",{className:"py-2 px-3 hover:bg-red-200 font-medium cursor-pointer",children:[Object(s.jsx)("i",{className:"fab fa-accusoft text-red-600 mr-2"}),"Custom"]})]}),Object(s.jsx)("div",{className:"w-3/4 h-full"})]})})]})}function R(e){var t=Object(a.useState)(""),c=Object(l.a)(t,2),n=c[0],i=c[1];return T.subscribe((function(){T.getState().imageReducer.image&&i(T.getState().imageReducer.image.currentSrc)})),Object(s.jsxs)("div",{className:"".concat(e.isShowCrop?"flex justify-center items-center h-screen w-screen absolute top-0 left-0":"hidden"),children:[Object(s.jsx)("div",{className:"w-screen h-screen bg-gray-500 opacity-50 absolute z-10 top-0 left-0"}),Object(s.jsxs)("div",{className:"h-3/4 w-1/2 bg-white absolute z-20 rounded shadow-lg",children:[Object(s.jsxs)("div",{className:"flex justify-between items-center px-3 pt-2 text-gray-600",children:[Object(s.jsx)("div",{className:"font-bold",children:"CROP IMAGE"}),Object(s.jsx)("button",{className:"p-2 transition duration-300 ease-in-out transform hover:rotate-90",onClick:function(){return e.setIsShowCrop(!1)},children:Object(s.jsx)("i",{className:"fas fa-times"})})]}),Object(s.jsxs)("div",{className:"px-2 h-full",children:[Object(s.jsxs)("div",{className:"border border-gray-200 rounded",style:{height:"calc(100% - 150px)"},children:[Object(s.jsxs)("div",{className:"bg-gray-100 rounded p-2 text-sm text-gray-600",children:[Object(s.jsx)("button",{onClick:function(){},children:Object(s.jsx)("i",{className:"fas fa-undo px-2"})}),Object(s.jsx)("button",{children:Object(s.jsx)("i",{className:"fas fa-redo px-2"})})]}),Object(s.jsx)("div",{className:"p-4 flex justify-center",style:{height:"calc(100% - 36px)"},children:Object(s.jsx)("img",{src:n,alt:""})})]}),Object(s.jsxs)("div",{className:"text-right mt-4",children:[Object(s.jsx)("button",{className:"text-gray-600 rounded font-medium px-6 py-2 mr-2 hover:text-gray-700",onClick:function(){return e.setIsShowCrop(!1)},children:"Cancel"}),Object(s.jsxs)("button",{className:"bg-blue-500 text-white rounded font-medium px-6 py-2 hover:bg-blue-600",children:[Object(s.jsx)("i",{className:"fas fa-crop"})," Crop"]})]})]})]})]})}var E=function(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),c=t[0],n=t[1],i=Object(a.useState)(100),r=Object(l.a)(i,2),j=r[0],o=r[1];function b(e){o(e),n(!0)}function d(e){o(e?j+10:j-10)}return Object(s.jsxs)("div",{className:"flex text-sm",children:[Object(s.jsx)("div",{className:"px-2 py-3 text-gray-400 cursor-pointer hover:text-blue-500",onClick:function(){return d(!1)},children:Object(s.jsx)("i",{className:"fas fa-search-minus"})}),Object(s.jsxs)("div",{className:"px-2 py-3 font-medium text-gray-700 cursor-pointer relative",children:[Object(s.jsxs)("div",{onClick:function(){return n(!c)},children:[j,"%"]}),Object(s.jsxs)("div",{className:"absolute bg-white mt-1 rounded",style:{right:-10},hidden:c,children:[Object(s.jsx)("div",{className:"px-4 py-2 hover:text-blue-500",onClick:function(){return b(50)},children:"50%"}),Object(s.jsx)("div",{className:"px-4 py-2 hover:text-blue-500",onClick:function(){return b(75)},children:"75%"}),Object(s.jsx)("div",{className:"px-4 py-2 hover:text-blue-500",onClick:function(){return b(100)},children:"100%"}),Object(s.jsx)("div",{className:"px-4 py-2 hover:text-blue-500",onClick:function(){return b(125)},children:"125%"}),Object(s.jsx)("div",{className:"px-4 py-2 hover:text-blue-500",onClick:function(){return b(150)},children:"150%"})]})]}),Object(s.jsx)("div",{className:"px-2 py-3 text-gray-400 cursor-pointer hover:text-blue-500",onClick:function(){return d(!0)},children:Object(s.jsx)("i",{className:"fas fa-search-plus"})})]})};function F(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)(R,{isShowCrop:c,setIsShowCrop:n}),Object(s.jsxs)("div",{className:"flex text-gray-700",children:[Object(s.jsxs)("div",{className:"flex text-sm flex-grow",children:[Object(s.jsx)(D,{icon:"fas fa-undo"}),Object(s.jsx)(D,{icon:"fas fa-redo"}),Object(s.jsx)("div",{className:"pl-4 py-3 text-gray-600 hover:text-gray-700 cursor-pointer",onClick:function(){n(!0)},children:Object(s.jsx)("i",{className:"fas fa-crop"})}),Object(s.jsx)(D,{icon:"fas fa-fill-drip"})]}),Object(s.jsx)(E,{})]})]})}var D=function(e){return Object(s.jsx)("div",{className:"pl-4 py-3 text-gray-400",children:Object(s.jsx)("i",{className:e.icon})})},_=(c(99),c(18));function M(){return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"bg-gray-800 w-16 h-full flex-col",children:[Object(s.jsx)("div",{className:"text-white w-full h-16 flex justify-center items-center hover:bg-gray-900 cursor-pointer",children:Object(s.jsx)(_.b,{to:"/",children:Object(s.jsx)("i",{className:"fas fa-image text-2xl"})})}),Object(s.jsx)("div",{className:"text-white w-full h-16 flex justify-center items-center hover:bg-gray-900 cursor-pointer",children:Object(s.jsx)("i",{className:"fas fa-disease text-2xl"})}),Object(s.jsx)("div",{className:"text-white w-full h-16 flex justify-center items-center hover:bg-gray-900 cursor-pointer",children:Object(s.jsx)("i",{className:"fas fa-paragraph text-2xl"})}),Object(s.jsx)("div",{className:"text-white w-full h-16 flex justify-center items-center hover:bg-gray-900 cursor-pointer",children:Object(s.jsx)(_.b,{to:"/text",children:Object(s.jsx)("i",{className:"fab fa-autoprefixer text-2xl"})})})]})})}function z(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"font-bold mb-3 text-lg",children:"Image"}),Object(s.jsx)("div",{className:"mb-2",children:"Brightness"}),Object(s.jsxs)("div",{className:"w-full flex items-center",children:[Object(s.jsx)("input",{type:"range",min:"-100",max:"100",value:c,className:"flex-grow mr-2",onChange:function(e){return n(e.target.value)}}),Object(s.jsx)("input",{type:"text",className:"p-1 w-12 bg-gray-100 rounded text-center",value:c})]})]})}function B(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),c=t[0],n=t[1],i=Object(o.b)(),r=function(e,t){var c=document.createElement("img");c.src=e,i({type:x,payload:{image:c,id:t}})};return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"font-bold text-xl text-gray-700 mb-3",children:"Photo"}),Object(s.jsxs)("label",{className:"bg-blue-500 text-white block p-2 text-center font-bold cursor-pointer hover:bg-blue-600 shadow rounded",htmlFor:"image",children:[Object(s.jsx)("input",{type:"file",hidden:!0,accept:"image/*",id:"image",onChange:function(e){var t=e.currentTarget.files[0],s=[].concat(Object(p.a)(c),[URL.createObjectURL(t)]);n(s)}}),Object(s.jsx)("i",{className:"fas fa-cloud-upload-alt mr-2"})," Upload"]}),Object(s.jsx)("div",{className:"overflow-auto mt-1",style:{height:"calc(100vh - 150px)"},children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(s.jsx)("button",{className:"mb-2 bg-gray-900",children:Object(s.jsx)("img",{src:e,alt:"img",onClick:function(){return r(e,t.toString())},className:"transition duration-700 hover:opacity-75"})},t)}))})]})}var L=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),c=t[0],n=t[1],i=Object(b.f)(),r=Object(o.b)(),j=Object(o.c)((function(e){return e.textReducer.textId})),d=Object(o.c)((function(e){return e.textReducer.listText}));function x(e){var t=Object(g.a)({},c);t.text=e,r({type:u,payload:t})}return Object(a.useEffect)((function(){var e=d.find((function(e){return e.id===j}));e?n(e):console.error("text config not found!!!")}),[d,j]),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"mb-2 font-medium",children:"Text"}),Object(s.jsx)("input",{type:"text",className:"px-4 py-2 bg-gray-100 w-full mb-3 rounded",defaultValue:null===c||void 0===c?void 0:c.text,onChange:function(e){return x(e.target.value)}}),Object(s.jsx)("div",{className:"mb-2 font-medium",children:"Font style"}),Object(s.jsx)("div",{className:"mb-4 text-sm",children:Object(s.jsxs)("div",{className:"flex justify-between items-center",children:[Object(s.jsxs)("label",{className:"mr-2 font-bold",children:[Object(s.jsx)("input",{type:"checkbox"})," Bold"]}),Object(s.jsxs)("label",{className:"mr-2 italic",children:[Object(s.jsx)("input",{type:"checkbox"})," Italic"]}),Object(s.jsxs)("label",{className:"mr-2 underline",children:[Object(s.jsx)("input",{type:"checkbox"})," Underline"]})]})}),Object(s.jsxs)("button",{className:"px-6 py-2 bg-blue-500 text-white rounded font-medium",onClick:function(){i.push("/text")},children:[Object(s.jsx)("i",{className:"fas fa-save mr-2"}),"Save"]})]})},P=function(){var e=Object(o.b)(),t=function(t){var c=t.target.ownerDocument.defaultView.getComputedStyle(t.target,null),s={id:Math.random().toString(36).substring(7),text:t.target.innerText,fontFamily:c.fontFamily,fontSize:Number(c.fontSize.match(/\d+/)[0])};e({type:m,payload:s})};return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"font-bold text-xl text-gray-700 mb-3",children:"Text"}),Object(s.jsxs)("div",{className:"p-2 text-xl",children:[Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("button",{className:"font-bold",onClick:t,children:"Bold"})}),Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("button",{className:"font-bold italic",onClick:t,children:"Bold Italic"})}),Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("button",{onClick:t,children:"Normal"})}),Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("button",{onClick:t,className:"italic",children:"Normal Italic"})})]})]})};function U(){return Object(s.jsxs)(b.c,{children:[Object(s.jsx)(b.a,{exact:!0,path:"/image/setting",children:Object(s.jsx)(z,{})}),Object(s.jsx)(b.a,{exact:!0,path:"/text/edit",children:Object(s.jsx)(L,{})}),Object(s.jsx)(b.a,{exact:!0,path:"/text",children:Object(s.jsx)(P,{})}),Object(s.jsx)(b.a,{exact:!0,path:"/",children:Object(s.jsx)(B,{})})]})}var A=function(){return Object(s.jsxs)("div",{className:"bg-gray-100 h-full",children:[Object(s.jsx)(I,{}),Object(s.jsxs)("div",{className:"flex",style:{height:"calc(100vh - 49px)"},children:[Object(s.jsx)(M,{}),Object(s.jsx)("div",{className:"w-72 border-r bg-white p-3",children:Object(s.jsx)(U,{})}),Object(s.jsxs)("div",{className:"flex-grow",children:[Object(s.jsx)(F,{}),Object(s.jsx)("div",{className:"flex items-center justify-center",style:{height:"calc(100% - 48px)"},children:Object(s.jsx)(h,{})})]})]})]})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,101)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),s(e),a(e),n(e),i(e)}))},G=Object(O.b)(k);r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(_.a,{children:Object(s.jsx)(o.a,{store:G,children:Object(s.jsx)(A,{})})})}),document.getElementById("root")),X()},99:function(e,t,c){}},[[100,1,2]]]);
//# sourceMappingURL=main.c388de76.chunk.js.map